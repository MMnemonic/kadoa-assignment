@tailwind base;
@tailwind components;
@tailwind utilities;

/* Kadoa variables â€” light defaults */
:root {
	--bg-canvas: 248 248 249;
	--bg-surface: 255 255 255;
	--bg-subtle: 249 250 251;
	--border: 227 229 232;
	--text: 23 23 24;
	--text-muted: 98 104 112;
	--accent: 249 115 22;
	--accent-600: 234 88 12;
	--chip-info: 59 130 246;
	--chip-warn-bg: 254 243 199;
	--chip-warn-text: 180 83 9;
	--chip-crit-bg: 254 226 226;
	--chip-crit-text: 153 27 27;
}

.dark:root {
	--bg-canvas: 15 15 17;
	--bg-surface: 24 24 27;
	--bg-subtle: 18 18 20;
	--border: 39 39 42;
	--text: 244 244 245;
	--text-muted: 161 161 170;
	--accent: 249 115 22;
	--accent-600: 234 88 12;
	--chip-info: 96 165 250;
	--chip-warn-bg: 46 32 17;
	--chip-warn-text: 245 158 11;
	--chip-crit-bg: 50 18 18;
	--chip-crit-text: 248 113 113;
}

/* Canvas */
body { @apply bg-[rgb(var(--bg-canvas))] text-[rgb(var(--text))]; }

/* Subtle geometric background (triangles) on canvas wrapper */
.app-bg { @apply bg-kadoa-pattern; }
.kd-bg {
	/* two layers of triangular grids at different scales */
	background-image:
		linear-gradient(135deg, rgba(0,0,0,0.03) 25%, transparent 25%),
		linear-gradient(225deg, rgba(0,0,0,0.03) 25%, transparent 25%),
		linear-gradient(45deg, rgba(0,0,0,0.03) 25%, transparent 25%),
		linear-gradient(315deg, rgba(0,0,0,0.03) 25%, rgba(0,0,0,0.03) 25%),
		linear-gradient(135deg, rgba(0,0,0,0.02) 25%, transparent 25%),
		linear-gradient(225deg, rgba(0,0,0,0.02) 25%, transparent 25%),
		linear-gradient(45deg, rgba(0,0,0,0.02) 25%, transparent 25%),
		linear-gradient(315deg, rgba(0,0,0,0.02) 25%, rgba(0,0,0,0.02) 25%);
	background-position:
		20px 0, 20px 0, 0 0, 0 0,
		80px 0, 80px 0, 60px 0, 60px 0;
	background-size:
		40px 40px, 40px 40px, 40px 40px, 40px 40px,
		160px 160px, 160px 160px, 160px 160px, 160px 160px;
	background-repeat: repeat;
}
.dark .kd-bg {
	background-image:
		linear-gradient(135deg, rgba(255,255,255,0.04) 25%, transparent 25%),
		linear-gradient(225deg, rgba(255,255,255,0.04) 25%, transparent 25%),
		linear-gradient(45deg, rgba(255,255,255,0.04) 25%, transparent 25%),
		linear-gradient(315deg, rgba(255,255,255,0.04) 25%, rgba(255,255,255,0.04) 25%),
		linear-gradient(135deg, rgba(255,255,255,0.02) 25%, transparent 25%),
		linear-gradient(225deg, rgba(255,255,255,0.02) 25%, transparent 25%),
		linear-gradient(45deg, rgba(255,255,255,0.02) 25%, transparent 25%),
		linear-gradient(315deg, rgba(255,255,255,0.02) 25%, rgba(255,255,255,0.02) 25%);
	background-position:
		20px 0, 20px 0, 0 0, 0 0,
		80px 0, 80px 0, 60px 0, 60px 0;
	background-size:
		40px 40px, 40px 40px, 40px 40px, 40px 40px,
		160px 160px, 160px 160px, 160px 160px, 160px 160px;
	background-repeat: repeat;
}

@layer components {
	/* Surfaces & cards */
	.ui-surface { @apply bg-[rgb(var(--bg-surface))] border border-[rgb(var(--bg-subtle))] dark:border-white/10 rounded-xl shadow-elev-1; }
	.ui-card    { @apply ui-surface p-4; }
	.ui-card-hover { @apply transition-all duration-150 hover:shadow-elev-2 hover:-translate-y-0.5 hover:ring-1 hover:ring-[rgb(var(--accent))] hover:border-transparent focus-within:ring-1 focus-within:ring-[rgb(var(--accent))]; }

	/* Buttons */
	.ui-btn { @apply inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm border border-[rgb(var(--bg-subtle))] dark:border-white/10 bg-[rgb(var(--bg-surface))] hover:bg-[rgb(var(--bg-subtle))] transition; }
	.ui-btn--primary { @apply bg-[rgb(var(--accent))] text-white border-transparent hover:bg-[rgb(var(--accent-600))]; }
	.ui-btn--ghost { @apply rounded-xl px-3 py-2 border border-white/10 bg-white/5 hover:bg-white/[.08] text-white/90 dark:text-white/90; }
	.ui-iconbtn { @apply ui-btn p-2; border-radius: 10px; }
	.focus-ring { @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/60; }

	/* Badges / chips */
	.ui-chip { @apply inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs border; }
	.ui-chip--info { @apply border-transparent bg-blue-50 text-blue-700 dark:bg-blue-500/10 dark:text-blue-300; }
	.ui-chip--warn { background-color: rgb(var(--chip-warn-bg)); color: rgb(var(--chip-warn-text)); @apply border-transparent; }
	.ui-chip--crit { background-color: rgb(var(--chip-crit-bg)); color: rgb(var(--chip-crit-text)); @apply border-transparent; }

	/* Segmented control */
	.ui-seg { @apply inline-flex items-center rounded-xl border border-[rgb(var(--bg-subtle))] dark:border-white/10 bg-[rgb(var(--bg-surface))] p-0.5; }
	.ui-segitem { @apply px-3 h-9 inline-flex items-center rounded-lg text-sm data-[active=true]:bg-[rgb(var(--bg-subtle))]; }

	/* KPI tiles */
	.ui-kpi { @apply ui-card flex items-center justify-between; }
	.ui-kpi__value { @apply text-2xl font-semibold tracking-tight; }
	.ui-kpi__delta--up { @apply inline-flex items-center gap-1 rounded-full bg-green-50 text-green-700 px-2 py-0.5 text-xs border border-green-200 dark:bg-green-500/10 dark:text-green-300 dark:border-green-900; }
	.ui-kpi__delta--down { @apply inline-flex items-center gap-1 rounded-full bg-red-50 text-red-700 px-2 py-0.5 text-xs border border-red-200 dark:bg-red-500/10 dark:text-red-300 dark:border-red-900; }

	/* Inputs */
	.ui-field { @apply rounded-lg border border-[rgb(var(--bg-subtle))] dark:border-white/10 bg-[rgb(var(--bg-surface))] px-3 py-2 text-sm outline-none focus:ring-2 ring-[rgb(var(--accent))]; }

	/* Sticky toolbar wrapper */
	.ui-sticky { @apply sticky top-[64px] z-30; }
	.toolbar { @apply ui-card p-3; }
	.toolbar[data-scrolled='true'] { @apply shadow-elev-1; }

	/* Static group header inside list */
	.group-header { @apply px-4 py-1 text-xs font-medium tracking-wide text-white/60; }

	/* --- Glass containers (near solid, no blur) --- */
	.ui-glass { @apply rounded-2xl border shadow-elev-1 backdrop-blur-none; background-color: rgb(var(--bg-surface) / 0.8); border-color: rgb(var(--border)); }
	.ui-glass-strong { @apply rounded-2xl border shadow-elev-2 backdrop-blur-none; background-color: rgb(var(--bg-surface) / 0.8); border-color: rgb(var(--border)); }
	.ui-glass .notif-row, .ui-glass .ui-btn, .ui-glass .ui-chip, .ui-glass .ui-field, .ui-glass .ui-segitem, .ui-glass-strong .notif-row, .ui-glass-strong .ui-btn, .ui-glass-strong .ui-chip, .ui-glass-strong .ui-field, .ui-glass-strong .ui-segitem { background-color: rgb(var(--bg-surface)); }

	/* Drawer helper */
	.ui-drawer { @apply ui-glass-strong shadow-elev-2 rounded-l-2xl; }

	/* Notification row layering */
	.notif-row { @apply relative isolate z-0; }
	.notif-row:hover, .notif-row:focus-within { @apply z-[20]; }

	/* Unread dot */
	.unread-dot { @apply inline-block h-2 w-2 rounded-full bg-[rgb(var(--accent))]; }
}
